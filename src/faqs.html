<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aaharkosh</title>
    <link rel="shortcut icon" href="../images/aaharkosh-logo.jpg" type="image/x-icon">
    <link href="./output.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet"/>
    <style>
        body {
            font-family: 'roboto', serif;
        }
        :root {
            --color-primary: #FF570C;
            --color-secondary: #FF9D5C;
            --color-primary-light: #FFE8D6;
        }

        .loader {
            border: 4px solid #FF570C;
            border-top: 4px solid #FFE8D6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="">

    <!-- NAVBAR -->

    <header id="app-header"></header>

    <main class="mx-auto  py-10 text-center mt-12">
        <div class="bg-[var(--color-primary-light)] w-full py-16 max-sm:px-5">
            <h2 class="text-3xl font-bold text-gray-900">FREQUENTLY ASKED QUESTIONS (FAQs)</h2>
            <p class="text-gray-600 mt-2">These Are The Most Commonly Asked Questions About Aaharkosh</p>

            <div class="mt-6 gap-4 max-sm:gap-0 flex flex-col md:space-x-4 items-center justify-center">
                <div class="flex  w-full md:w-1/3 ml-4 max-sm:ml-0">
                    <input type="text" placeholder="Find Your Answers" class="placeholder-gray-600 p-3 bg-white rounded-full w-full focus:outline-none">
                    <button class="bg-[var(--color-secondary)] text-white px-5 py-0 h-9 mt-[0.4vw] rounded-full ml-[-6.5vw] max-sm:ml-[-25vw] max-sm:mt-[1.5vw]">Search</button>
                </div>
                <!-- Category Dropdown -->
                <div class="relative w-full md:w-1/3 mt-4 md:mt-0">
                    <button class="p-3 rounded-full text-gray-600 w-full text-left bg-white flex justify-between items-center" onclick="toggleDropdown()">
                        <span id="category-text">Select Category</span>
                        <svg id="arrow" class="w-5 h-5 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div id="dropdown" id="category-select" onchange= "changeCategory()" class="absolute z-10 hidden bg-white rounded-lg w-full mt-1 shadow-lg">
                        <button class="block w-full text-left p-2 hover:bg-gray-200" value="general">General</button>
                        <button class="block w-full text-left p-2 hover:bg-gray-200" value="vendor">Vendor</button>
                        <button class="block w-full text-left p-2 hover:bg-gray-200" value="delivery">Delivery</button>
                        <button class="block w-full text-left p-2 hover:bg-gray-200" value="subscription">Subscription</button>
                        <button class="block w-full text-left p-2 hover:bg-gray-200" value="technical">Technical</button>
                        <button class="block w-full text-left p-2 hover:bg-gray-200" value="payment">Payment</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="faq-container" class=" mt-10 max-w-3xl mx-auto py-12 max-sm:px-5">
            <div class="faq-item flex-col bg-white rounded-lg p-4 mb-4 cursor-pointer flex justify-between items-center" onclick="toggleFAQ(this)" style="box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.15);">
                <div class="flex justify-between w-full">
                    <h3 class="font-medium text-lg">What Is Your Refund Policy?</h3>
                    <svg class="faq-arrow w-5 h-5 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <p class="text-gray-600 text-left hidden mt-2 border-gray-200 border-t-2 pt-3">Our Refund Policy Allows For Returns Within 30 Days Of Purchase. Please Ensure The Items Are In Their Original Condition.</p>
            </div>
            <div class="faq-item flex-col bg-white rounded-lg p-4 mb-4 cursor-pointer flex justify-between items-center" onclick="toggleFAQ(this)" style="box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.15);">
                <div class="flex justify-between w-full">
                    <h3 class="font-medium text-lg">What Is Your Refund Policy?</h3>
                    <svg class="faq-arrow w-5 h-5 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <p class="text-gray-600 text-left hidden mt-2 border-gray-200 border-t-2 pt-3">Our Refund Policy Allows For Returns Within 30 Days Of Purchase. Please Ensure The Items Are In Their Original Condition.</p>
            </div>
            <div class="faq-item flex-col bg-white rounded-lg p-4 mb-4 cursor-pointer flex justify-between items-center" onclick="toggleFAQ(this)" style="box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.15);">
                <div class="flex justify-between w-full">
                    <h3 class="font-medium text-lg">What Is Your Refund Policy?</h3>
                    <svg class="faq-arrow w-5 h-5 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <p class="text-gray-600 text-left hidden mt-2 border-gray-200 border-t-2 pt-3">Our Refund Policy Allows For Returns Within 30 Days Of Purchase. Please Ensure The Items Are In Their Original Condition.</p>
            </div>
            <div class="faq-item flex-col bg-white rounded-lg p-4 mb-4 cursor-pointer flex justify-between items-center" onclick="toggleFAQ(this)" style="box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.15);">
                <div class="flex justify-between w-full">
                    <h3 class="font-medium text-lg">What Is Your Refund Policy?</h3>
                    <svg class="faq-arrow w-5 h-5 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <p class="text-gray-600 text-left hidden mt-2 border-gray-200 border-t-2 pt-3">Our Refund Policy Allows For Returns Within 30 Days Of Purchase. Please Ensure The Items Are In Their Original Condition.</p>
            </div>
            <div class="faq-item flex-col bg-white rounded-lg p-4 mb-4 cursor-pointer flex justify-between items-center" onclick="toggleFAQ(this)" style="box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.15);">
                <div class="flex justify-between w-full">
                    <h3 class="font-medium text-lg">What Is Your Refund Policy?</h3>
                    <svg class="faq-arrow w-5 h-5 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <p class="text-gray-600 text-left hidden mt-2 border-gray-200 border-t-2 pt-3">Our Refund Policy Allows For Returns Within 30 Days Of Purchase. Please Ensure The Items Are In Their Original Condition.</p>
            </div>

            
            <!-- Extra FAQs (Load More/Less) -->
        <div  id="extra-faqs" class="w-full flex-col bg-white text-left rounded-lg cursor-pointer flex justify-between"></div>
            
        </div>

        <!-- Buttons -->
        <section>
            <div class="flex max-w-3xl mb-10 max-sm:px-4 max-md:px-8 mx-auto justify-between">
                <button id="load-less" class="bg-[var(--color-secondary)] text-white px-7 py-2 rounded-lg hover:bg-orange-500 transition-all duration-300 transition-colors">Load Less</button>
                <div id="loader" class="hidden w-full mb-20">
                    <span class="loader"></span>
                </div>
                <button id="load-more" class="bg-[var(--color-secondary)] text-white px-7 py-2 rounded-lg hover:bg-orange-500 transition-all duration-300 transition-colors">Load More</button>
            </div>
        </section>
    </main>

    <!-- FOOTER-SECTION -->

    <footer id="app-footer"></footer>


    <script src="../js/header.js"></script>
    <script src="../js/footer.js"></script>  

</body>
</html>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const extraFaqsContainer = document.getElementById("extra-faqs");
        const loadMoreBtn = document.getElementById("load-more");
        const loadLessBtn = document.getElementById("load-less");

        const extraFaqs = [
            { question: "Can I get a refund?", answer: "Refunds are available within 24 hours of order placement." },
            { question: "How can I contact customer support?", answer: "You can reach our support team via email or phone for assistance." },
            { question: "Do you offer custom meal plans?", answer: "Yes! We provide personalized meal plans based on your preferences." },
            { question: "Is there a trial period?", answer: "Yes, we offer a 7-day free trial for new users." },
            { question: "Can I change my meal preferences?", answer: "Absolutely! You can update your preferences anytime in settings." }
        ];

        let faqIndex = 0;
        const batchSize = 5; // Number of FAQs to load at a time

        loadMoreBtn.addEventListener("click", function () {
            let count = 0;
            while (faqIndex < extraFaqs.length && count < batchSize) {
                const faq = extraFaqs[faqIndex];
                const faqDiv = document.createElement("div");
                faqDiv.classList.add("faq-item", "flex-col", "bg-white", "rounded-lg", "p-4", "mb-4", "cursor-pointer", "flex", "justify-between", "items-center");
                faqDiv.style.boxShadow = "0 0 5px 2px rgba(0, 0, 0, 0.15)";
                faqDiv.onclick = function () { toggleFAQ(faqDiv); };
                faqDiv.innerHTML = `
                    <div class="flex justify-between w-full">
                        <h3 class="font-medium text-lg">${faq.question}</h3>
                        <svg class="faq-arrow w-5 h-5 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <p class="text-gray-600 text-left w-full hidden mt-2 border-gray-200 border-t-2 pt-3">${faq.answer}</p>
                `;
                extraFaqsContainer.appendChild(faqDiv);
                faqIndex++;
                count++;
            }
        });

        loadLessBtn.addEventListener("click", function () {
            let count = 0;
            while (extraFaqsContainer.children.length > 0 && count < batchSize) {
                extraFaqsContainer.removeChild(extraFaqsContainer.lastChild);
                faqIndex--;
                count++;
            }
        });
    });


    // category option api integration
    document.addEventListener("DOMContentLoaded", function () {
        const dropdown = document.getElementById("dropdown");
        const categoryText = document.getElementById("category-text");
        const arrowIcon = document.getElementById("arrow");
        const faqList = document.getElementById("faq-container");
        const loadMoreBtn = document.getElementById("load-more");
        const loadLessBtn = document.getElementById("load-less");
        const loader = document.getElementById("loader"); // Loader element

        let page = 1; // Initial page number
        const limit = 5; // Number of FAQs per request
        // let currentCategory = "General"; // Default category

        // Function to toggle dropdown visibility
        function toggleDropdown() {
            dropdown.classList.toggle("hidden");
            arrowIcon.classList.toggle("rotate-180");
        }

        // Function to fetch FAQs based on selected category and page number
        function fetchFaqData(category, pageNumber) {
            categoryText.textContent = category; // Update button text
            dropdown.classList.add("hidden"); // Hide dropdown
            arrowIcon.classList.remove("rotate-180");

            currentCategory = category; // Update the current category
            const categoryFormatted = category.toLowerCase(); // Ensure API format match
            const apiUrl = `https://aharkosh-backend.onrender.com/api/faq/category/${categoryFormatted}?page=${pageNumber}&limit=${limit}`;

            loader.classList.remove("hidden"); // Show loader
            loadMoreBtn.classList.add("hidden");
            loadLessBtn.classList.add("hidden");

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    loader.classList.add("hidden"); // Hide loader after data is fetched
                    loadMoreBtn.classList.remove("hidden");
                    loadLessBtn.classList.remove("hidden");


                    if (!data.data || !data.data.data || data.data.data.length === 0) {
                        if (pageNumber === 1) {
                            faqList.innerHTML = "<p class='text-center text-gray-500'>No FAQs available for this category.</p>";
                        }
                        return;
                    }

                    data.data.data.forEach(faq => {
                        const faqItem = document.createElement("div");
                        faqItem.classList.add("faq-block");
                        faqItem.setAttribute("data-page", pageNumber); // Track which page it belongs to

                        faqItem.innerHTML = `
                        <div class="faq-item flex-col bg-white rounded-lg p-4 mb-4 cursor-pointer flex justify-between items-center" onclick="toggleFAQ(this)" style="box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.15);">
                            <div class="flex justify-between w-full">
                                <h3 class="font-medium text-lg text-left">${faq.question}</h3>
                                <svg class="faq-arrow w-5 h-5 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <p class="text-gray-600 text-left w-full hidden mt-2 border-gray-200 border-t-2 pt-3">${faq.answer}</p>
                        </div>
                        `;

                        faqList.appendChild(faqItem);
                    });
                })
                .catch(error => {
                    console.error("Error fetching FAQs:", error);
                    faqList.innerHTML = "<p class='text-center text-red-500'>Error fetching data. Please try again.</p>";
                });
        }

        // Function to load more FAQs
        loadMoreBtn.addEventListener("click", function () {
            page++; // Increase the page number
            fetchFaqData(currentCategory, page);
        });

        // Function to load less FAQs
        loadLessBtn.addEventListener("click", function () {
            if (page > 1) {
                // Find and remove FAQs from the last loaded page
                document.querySelectorAll(`.faq-block[data-page="${page}"]`).forEach(faq => faq.remove());

                page--; // Decrease the page number
            }
        });

        // Add event listeners to each category button
        document.querySelectorAll("#dropdown button").forEach(button => {
            button.addEventListener("click", function () {
                const selectedCategory = this.textContent.trim();
                page = 1; // Reset to first page on category change
                faqList.innerHTML = ""; // Clear previous FAQs
                fetchFaqData(selectedCategory, page);
            });
        });

        // Make functions accessible globally
        window.toggleDropdown = toggleDropdown;
    });

    function toggleFAQ(element) {
        const answer = element.querySelector("p");
        const arrow = element.querySelector(".faq-arrow");
        answer.classList.toggle("hidden");
        arrow.classList.toggle("rotate-180");
    }
    function selectCategory(category) {
        document.getElementById('category-text').innerText = category;
        toggleDropdown();
    }
    
</script>